<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Page Preview</title>
    <!-- Page-specific layout CSS -->
    <link rel="stylesheet" href="/Library/No_Overflow/Volumes/<%= volume %>/<%= chapter %>/<%= pageId %>/page.css">
</head>
<body class="preview-mode">
    <input type="file" id="globalPanelUpload" style="display:none" accept="image/*,video/*">

    <div id="preview-container">
        <%- content %>
    </div>

    <script type="module">
        import { loadCSS } from "/libs/Utility.js";
        import { init as initPreview } from "/views/preview-shell/preview.js";

        (async () => {
            await loadCSS("/views/preview-shell/preview.css");
            
            const container = document.getElementById('preview-container');
            const params = {
                series: "<%= typeof series !== 'undefined' ? series : 'No_Overflow' %>",
                volume: "<%= volume %>",
                chapter: "<%= chapter %>",
                pageId: "<%= pageId %>"
            };

            await initPreview(container, params);
        })();
    </script>
</body>
</html>
